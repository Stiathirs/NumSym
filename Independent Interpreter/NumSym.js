var o=process.argv;3>o.length&&(console.log("Usage: node "+o[1]+" numsymfile [inputfile | inputstring]"),process.exit(1));var a,f=require("fs"),c=o[2];if(c=f.readFileSync(c,"utf8"),3<o.length){a=o[3];try{a=f.readFileSync(a,"utf8")}catch{}}else a="";var i=0,e=!1,g=0,s=[],b=0;for(c=c.replace(/[^0-9\+\-\*\/%^!@;#$<=>\[\]]/g,"");i<c.length;){var cc=c.charAt(i);if(/[0-9]/.test(cc)&&s.push(+cc),/\^/g.test(cc)&&(g<a.length?(s.push(a.charAt(g).charCodeAt(0)),g++):s.push(0)),/!/.test(cc))if(0<s.length){var temp=s.pop();s.push(temp,temp)}else throw{name:"StackUnderflowError",message:"Stack is empty"};if(/@/.test(cc)&&(s=s.reverse()),/[\+\*\-\/\%]/.test(cc))if(1<s.length){var r=s.pop(),l=s.pop(),st=l.toString()+cc+r.toString();s.push(eval(st))}else throw{name:"StackUnderflowError",message:"Stack contains less than two values"};if(/\#/.test(cc))if(0<s.length)process.stdout.write(s.pop().toString());else throw{name:"StackUnderflowError",message:"Stack is empty"};if(/\$/.test(cc))if(0<s.length)process.stdout.write(String.fromCharCode(s.pop()));else throw{name:"StackUnderflowError",message:"Stack is empty"};if(/;/.test(cc))if(0<s.length)s.pop();else throw{name:"StackUnderflowError",message:"Stack is empty"};if(/[=<>]/.test(cc))if(1<s.length){var r=s.pop(),l=s.pop();if("="==cc)r==l?s.push(1):s.push(0);else{var st=l.toString()+cc+r.toString();eval(st)?s.push(1):s.push(0)}}else throw{name:"StackUnderflowError",message:"Stack contains less than two values"};if(/\[/g.test(cc))if(0<s.length){var temp=s.pop();if(s.push(temp,temp),0!=s.pop())b++;else{var ob=b;for(b++;b!=ob&&i<c.length;)i++,cc=c.charAt(i),"["==cc?b++:"]"==cc&&b--;e=!0}}else throw{name:"StackUnderflowError",message:"Stack is empty"};if(!e&&/\]/g.test(cc)&&0<b){var ob=b;for(b--;b!=ob&&i<c.length;)i--,cc=c.charAt(i),"["==cc?b++:"]"==cc&&b--;i--}e=!1,i++}